<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.edu.upc.hyz.dao.ViewUserMapper">
    <resultMap id="BaseResultMap" type="cn.edu.upc.hyz.model.ViewUser">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun Mar 22 17:13:45 CST 2020.
        -->
        <result column="id" jdbcType="INTEGER" property="id"/>
        <result column="user_name" jdbcType="VARCHAR" property="userName"/>
        <result column="password" jdbcType="VARCHAR" property="password"/>
        <result column="real_name" jdbcType="VARCHAR" property="realName"/>
        <result column="work_place" jdbcType="INTEGER" property="workPlace"/>
        <result column="technology" jdbcType="INTEGER" property="technology"/>
        <result column="email" jdbcType="VARCHAR" property="email"/>
        <result column="field_position" jdbcType="INTEGER" property="fieldPosition"/>
        <result column="role" jdbcType="INTEGER" property="role"/>
        <result column="creat_time" jdbcType="TIMESTAMP" property="creatTime"/>
        <result column="del_flag" jdbcType="INTEGER" property="delFlag"/>
        <result column="operator" jdbcType="VARCHAR" property="operator"/>
        <result column="operator_ip" jdbcType="VARCHAR" property="operatorIp"/>
        <result column="operator_time" jdbcType="TIMESTAMP" property="operatorTime"/>
        <result column="work_place_name" jdbcType="VARCHAR" property="workPlaceName"/>
        <result column="technology_name" jdbcType="VARCHAR" property="technologyName"/>
        <result column="role_name" jdbcType="VARCHAR" property="roleName"/>
    </resultMap>
    <resultMap id="BaseResultNewMap" type="cn.edu.upc.hyz.model.ViewUserProject">
        <result column="id" jdbcType="INTEGER" property="id"/>

        <result column="group_user_id" jdbcType="INTEGER" property="groupUserId"/>
        <result column="group_id" jdbcType="INTEGER" property="groupId"/>
        <result column="user_type" jdbcType="INTEGER" property="userType"/>
        <result column="content" jdbcType="VARCHAR" property="content"/>

        <result column="user_name" jdbcType="VARCHAR" property="userName"/>
        <result column="real_name" jdbcType="VARCHAR" property="realName"/>
        <result column="work_place" jdbcType="INTEGER" property="workPlace"/>
        <result column="technology" jdbcType="INTEGER" property="technology"/>
        <result column="del_flag" jdbcType="INTEGER" property="delFlag"/>
        <result column="work_place_name" jdbcType="VARCHAR" property="workPlaceName"/>
        <result column="technology_name" jdbcType="VARCHAR" property="technologyName"/>
        <result column="operator" jdbcType="VARCHAR" property="operator"/>
        <result column="operator_ip" jdbcType="VARCHAR" property="operatorIp"/>
        <result column="operator_time" jdbcType="TIMESTAMP" property="operatorTime"/>
    </resultMap>
    <insert id="insert" parameterType="cn.edu.upc.hyz.model.ViewUser">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun Mar 22 17:13:45 CST 2020.
        -->
        insert into view_user (id, user_name, password,
        real_name, work_place, technology,
        email, field_position, role,
        creat_time, del_flag, operator,
        operator_ip, operator_time, work_place_name,
        technology_name, role_name)
        values (#{id,jdbcType=INTEGER}, #{userName,jdbcType=VARCHAR}, #{password,jdbcType=VARCHAR},
        #{realName,jdbcType=VARCHAR}, #{workPlace,jdbcType=INTEGER}, #{technology,jdbcType=INTEGER},
        #{email,jdbcType=VARCHAR}, #{fieldPosition,jdbcType=INTEGER}, #{role,jdbcType=INTEGER},
        #{creatTime,jdbcType=TIMESTAMP}, #{delFlag,jdbcType=INTEGER}, #{operator,jdbcType=VARCHAR},
        #{operatorIp,jdbcType=VARCHAR}, #{operatorTime,jdbcType=TIMESTAMP}, #{workPlaceName,jdbcType=VARCHAR},
        #{technologyName,jdbcType=VARCHAR}, #{roleName,jdbcType=VARCHAR})
    </insert>
    <insert id="insertSelective" parameterType="cn.edu.upc.hyz.model.ViewUser">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun Mar 22 17:13:45 CST 2020.
        -->
        insert into view_user
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="userName != null">
                user_name,
            </if>
            <if test="password != null">
                password,
            </if>
            <if test="realName != null">
                real_name,
            </if>
            <if test="workPlace != null">
                work_place,
            </if>
            <if test="technology != null">
                technology,
            </if>
            <if test="email != null">
                email,
            </if>
            <if test="fieldPosition != null">
                field_position,
            </if>
            <if test="role != null">
                role,
            </if>
            <if test="creatTime != null">
                creat_time,
            </if>
            <if test="delFlag != null">
                del_flag,
            </if>
            <if test="operator != null">
                operator,
            </if>
            <if test="operatorIp != null">
                operator_ip,
            </if>
            <if test="operatorTime != null">
                operator_time,
            </if>
            <if test="workPlaceName != null">
                work_place_name,
            </if>
            <if test="technologyName != null">
                technology_name,
            </if>
            <if test="roleName != null">
                role_name,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=INTEGER},
            </if>
            <if test="userName != null">
                #{userName,jdbcType=VARCHAR},
            </if>
            <if test="password != null">
                #{password,jdbcType=VARCHAR},
            </if>
            <if test="realName != null">
                #{realName,jdbcType=VARCHAR},
            </if>
            <if test="workPlace != null">
                #{workPlace,jdbcType=INTEGER},
            </if>
            <if test="technology != null">
                #{technology,jdbcType=INTEGER},
            </if>
            <if test="email != null">
                #{email,jdbcType=VARCHAR},
            </if>
            <if test="fieldPosition != null">
                #{fieldPosition,jdbcType=INTEGER},
            </if>
            <if test="role != null">
                #{role,jdbcType=INTEGER},
            </if>
            <if test="creatTime != null">
                #{creatTime,jdbcType=TIMESTAMP},
            </if>
            <if test="delFlag != null">
                #{delFlag,jdbcType=INTEGER},
            </if>
            <if test="operator != null">
                #{operator,jdbcType=VARCHAR},
            </if>
            <if test="operatorIp != null">
                #{operatorIp,jdbcType=VARCHAR},
            </if>
            <if test="operatorTime != null">
                #{operatorTime,jdbcType=TIMESTAMP},
            </if>
            <if test="workPlaceName != null">
                #{workPlaceName,jdbcType=VARCHAR},
            </if>
            <if test="technologyName != null">
                #{technologyName,jdbcType=VARCHAR},
            </if>
            <if test="roleName != null">
                #{roleName,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>
    <select id="getPersonList" parameterType="java.lang.Integer" resultMap="BaseResultNewMap">
      SELECT
        view_user.id,
        group_user.id AS group_user_id,
        group_user.group_id AS group_id,
        group_user.user_type AS user_type,
        group_user.content AS content,

        view_user.user_name,
        view_user.real_name,
        view_user.technology,
        view_user.work_place,
        view_user.work_place_name,
        view_user.technology_name,
        view_user.del_flag,
        view_user.operator,
        view_user.operator_ip,
        view_user.operator_time
        FROM
        view_user
        LEFT JOIN group_user
        ON group_user.user_id = view_user.id and group_user.del_flag = 0 and group_id=#{groupId,jdbcType=INTEGER}
        WHERE view_user.del_flag = 0
        ORDER BY
        view_user.id ASC,
        group_id ASC
  </select>
</mapper>